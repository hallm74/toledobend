<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Toledo Bend Tacklebox</title>
  <meta name="description" content="Toledo Bend Tacklebox: Your go-to source for real-time lake levels, accurate weather forecasts, and fishing reports for Toledo Bend Lake. Plan your fishing trips with confidence using detailed insights like barometric pressure trends, dew point, visibility, and more." />

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Toledo Bend Tacklebox">
  <meta property="og:description" content="Real-time lake level and weather updates for Toledo Bend.">
  <meta property="og:image" content="images/ogimage.png">
  <meta property="og:url" content="https://toledobend.app">
  <meta property="og:type" content="website">

  <!-- Stylesheets -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link rel="stylesheet" href="./base.css">
</head>
<body>
  <h1 class="d-flex align-items-center">
    Toledo Bend Tacklebox
    <div class="icon-buttons ms-3">
      <button id="theme-toggle" class="theme-button" aria-label="Toggle dark mode">
        <i class="bi" aria-hidden="true"></i>
      </button>
      <button
        class="theme-button"
        aria-label="Contact Us"
        data-bs-toggle="modal"
        data-bs-target="#contactModal"
        title="Contact Us"
      >
        <i class="bi bi-envelope-fill"></i>
      </button>
    </div>
  </h1>

  <div class="container">
    <div class="row g-4">
      <!-- Left Column -->
      <div class="col-lg-4">
        <!-- Lake Level Card -->
        <div class="card shadow" role="region" aria-labelledby="lake-level-heading">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0" id="lake-level-heading">Lake Level</h4>
          </div>
          <div class="card-body">
            <p id="lake-level" class="card-text text-center fs-4" aria-label="Current lake level">Loading...</p>
          </div>
        </div>

        <!-- Fishing Report Card -->
        <div class="card shadow mt-4" role="region" aria-labelledby="fishing-report-heading">
          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0" id="fishing-report-heading">Fishing Report</h4>
            <button
              class="btn btn-link text-white text-decoration-none"
              data-bs-toggle="collapse"
              data-bs-target="#fishingReportCollapse"
              aria-expanded="true"
              aria-controls="fishingReportCollapse"
              aria-label="Toggle fishing report visibility"
            >
              <i class="bi bi-chevron-up" aria-hidden="true"></i>
              <span class="sr-only">Toggle fishing report section</span>
            </button>
          </div>
          <div id="fishingReportCollapse" class="collapse d-lg-block">
            <div class="card-body">
              <p><span id="fishing-report-date">Loading...</span></p>
              <p id="fishing-report-text">Loading...</p>
            </div>
          </div>
        </div>
      </div>

<!-- Middle Column -->
<div class="col-md-6 col-lg-4">
        <!-- Weather Card -->
        <div class="card shadow" role="region" aria-labelledby="weather-heading">
          <div class="card-header bg-primary text-white">
            <h4 class="mb-0" id="weather-heading">Weather</h4>
          </div>
          <div class="card-body text-center">
            <div class="d-flex justify-content-center align-items-center position-relative">
              <!-- Weather Icon -->
              <i id="dynamic-weather-icon" class="dynamic-weather-icon bi"></i>
            </div>

            <!-- Alerts Section -->
            <div id="alerts-section" class="d-none mt-3" role="region" aria-labelledby="alerts-heading">
              <div class="card shadow mt-3">
                <div class="card-header bg-danger text-white d-flex justify-content-between align-items-center">
                  <h5 class="mb-0" id="alerts-heading">Active Weather Alerts</h5>
                  <button
                    class="btn btn-link text-white text-decoration-none"
                    data-bs-toggle="collapse"
                    data-bs-target="#alertDetailsCollapse"
                    aria-expanded="false"
                    aria-controls="alertDetailsCollapse"
                    aria-label="Toggle weather alerts visibility"
                  >
                    <i class="bi bi-chevron-down" aria-hidden="true"></i>
                    <span class="sr-only">Toggle weather alerts section</span>
                  </button>
                </div>
                <div id="alertDetailsCollapse" class="collapse">
                  <div id="weather-alerts" class="card-body" role="list" aria-label="List of active weather alerts">
                    <!-- Dynamically populated alerts -->
                  </div>
                </div>
              </div>
            </div>
      <ul class="list-group list-group-flush mt-3 text-center" id="weather-data" aria-label="Current weather conditions">
        <li class="list-group-item">
          <i class="bi bi-thermometer-high me-2" aria-hidden="true"></i>
          <span id="current-temp">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-thermometer-half me-2" aria-hidden="true"></i>
          <span id="feels-like">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-cloud me-2" aria-hidden="true"></i>
          <span id="description">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-wind me-2" aria-hidden="true"></i>
          <span id="wind-speed">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-compass me-2" aria-hidden="true"></i>
          <span id="wind-deg">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-water me-2" aria-hidden="true"></i>
          <span id="wind-gust">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-droplet me-2" aria-hidden="true"></i>
          <span id="humidity">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-brightness-high me-2" aria-hidden="true"></i>
          <span id="uvi">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-speedometer me-2" aria-hidden="true"></i>
          <span id="pressure">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi me-2" aria-hidden="true"></i>
          <span id="moon_phase">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-eye" aria-hidden="true"></i>
          <span id="visibility">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-droplet-half" aria-hidden="true"></i>
          <span id="dew-point">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-sunrise me-2" aria-hidden="true"></i>
          <span id="sunrise">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-sunset me-2" aria-hidden="true"></i>
          <span id="sunset">Loading...</span>
        </li>
        <li class="list-group-item">
          <i class="bi bi-trophy me-2" aria-hidden="true"></i>
          <span id="fishing-score">Loading...</span>
          <i class="bi bi-info-circle text-primary" data-bs-toggle="modal" data-bs-target="#instructionModal" title="Click for Instructions"></i>
        </li>
      </ul>
    </div>
  </div>
</div>

      <!-- Right Column -->
      <div class="col-md-6 col-lg-4">
        <!-- Five-Day Forecast Card -->
        <div class="card shadow" role="region" aria-labelledby="forecast-heading">
          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h4 class="mb-0" id="forecast-heading">5-Day Weather Forecast</h4>
            <button
              class="btn btn-link text-white text-decoration-none"
              data-bs-toggle="collapse"
              data-bs-target="#fiveDayWeatherCollapse"
              aria-expanded="false"
              aria-controls="fiveDayWeatherCollapse"
              aria-label="Toggle forecast visibility"
            >
              <i class="bi bi-chevron-down" aria-hidden="true"></i>
              <span class="sr-only">Toggle forecast section</span>
            </button>
          </div>
          <div id="fiveDayWeatherCollapse" class="collapse d-md-block">
            <div class="card-body">
              <div id="five-day-forecast" class="row g-3" role="list" aria-label="Weather forecast for next five days">
                <!-- Forecast will be dynamically populated -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="instructionModal" tabindex="-1" aria-labelledby="instructionModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="instructionModalLabel">Fishing Score Calculation</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <h2>How We Calculate the Fishing Score</h2>
          <p>The fishing score is our way of giving you a quick idea of how good the fishing conditions are. It’s based on several important factors that affect fish behavior:</p>
          <ol>
            <li>
              <i class="bi bi-thermometer-half me-2" aria-hidden="true"></i>
              <strong>Temperature:</strong> Fish are cold-blooded, so the water temperature plays a big role in how active they are. Moderate temperatures are usually best, while very cold or very hot temperatures can make fish less active.
            </li>
            <li>
              <i class="bi bi-cloud-sun me-2" aria-hidden="true"></i>
              <strong>Weather Conditions:</strong> Clear skies, light rain, or overcast clouds each affect how fish behave. For example, light rain can make fish more active, while clear skies might make them retreat to deeper waters.
            </li>
            <li>
              <i class="bi bi-wind me-2" aria-hidden="true"></i>
              <strong>Wind Speed and Direction:</strong> A moderate breeze helps mix the water, making fish more active. Too much wind, though, can make fishing difficult and push fish to less accessible areas.
            </li>
            <li>
              <i class="bi bi-droplet me-2" aria-hidden="true"></i>
              <strong>Humidity:</strong> Certain humidity levels are better for fishing. Fish are often more active when the humidity is between 60% and 80%.
            </li>
            <li>
              <i class="bi bi-brightness-high me-2" aria-hidden="true"></i>
              <strong>UV Index:</strong> Fish tend to avoid very bright, sunny conditions because it makes them more visible to predators. A lower UV index means they’re more likely to be out and about.
            </li>
            <li>
              <i class="bi bi-speedometer me-2" aria-hidden="true"></i>
              <strong>Barometric Pressure:</strong> This is a big one. When the barometric pressure is steady or falling, fish are more likely to feed. A rising pressure, however, can make them less active. We even track changes in barometric pressure over time to give you a more accurate prediction.
            </li>
            <li>
              <i class="bi bi-moon-stars me-2" aria-hidden="true"></i>
              <strong>Moon Phase:</strong> The moon influences tides and fish feeding cycles. Phases like waxing gibbous or full moon are generally better for fishing because they encourage more activity.
            </li>
            <li>
              <i class="bi bi-clock me-2" aria-hidden="true"></i>
              <strong>Time of Day:</strong> Fish are often most active during sunrise and sunset, so those times score higher.
            </li>
            <li>
              <i class="bi bi-droplet-half me-2" aria-hidden="true"></i>
              <strong>Dew Point:</strong> Dew point is a measure of moisture in the air. Dew points between 50°F and 60°F are considered favorable for fishing. Higher dew points can indicate overly humid conditions, while lower dew points might suggest dryness that can make fish less active.
            </li>
            <li>
              <i class="bi bi-eye me-2" aria-hidden="true"></i>
              <strong>Visibility:</strong> Visibility is an indicator of water clarity. Higher visibility (around 10 miles or more) often leads to better fishing conditions, as fish are more likely to move around. Poor visibility, caused by factors like heavy rain or sediment, can reduce fish activity.
            </li>
          </ol>
          
          <h3>Why Barometric Pressure Changes Matter</h3>
          <p>Fish have swim bladders that help them adjust to changes in water pressure. When the barometric pressure drops (like before a storm), fish tend to feed more because they feel less pressure in the water. Conversely, when the pressure rises, fish may become less active as they try to adjust.</p>
          <p>By looking at the pressure history and whether it’s rising, falling, or stable, we can fine-tune the fishing score to reflect these subtle changes.</p>
          
          <h3>The Final Score</h3>
          <p>We combine all these factors into a single number between 0 and 100. A higher score means the conditions are excellent for fishing, while a lower score suggests it might be a tough day. Along with the score, we provide a simple descriptor like “Excellent,” “Good,” “Fair,” or “Poor” to help you quickly understand the forecast.</p>
          
          <p>This way, you can plan your fishing trips with confidence!</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Contact Form Modal -->
<div class="modal fade" id="contactModal" tabindex="-1" aria-labelledby="contactModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="contactModalLabel">Drop Us a Line</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form method="POST" action="/thank-you" data-netlify="true">
        <div class="modal-body">
          <!-- Name Field -->
          <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input
              type="text"
              class="form-control"
              id="name"
              name="name"
              placeholder="Your Name"
              required
            />
          </div>
          <!-- Email Field -->
          <div class="mb-3">
            <label for="email" class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="email"
              name="email"
              placeholder="Your Email"
              required
            />
          </div>
          <!-- Comment Field -->
          <div class="mb-3">
            <label for="comment" class="form-label">Comment</label>
            <textarea
              class="form-control"
              id="comment"
              name="comment"
              rows="4"
              placeholder="Your Message"
              required
            ></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Send</button>
        </div>
      </form>
    </div>
  </div>
</div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="./data.js?t=${Date.now()}"></script>
  <script src="./script.js?t=${Date.now()}"></script>
</body>
</html>